(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

var keys = {
  ENTER: 13,
  ESC: 27,
  ARROW_UP: 38,
  ARROW_DOWN: 40
};

var OSelect = /*#__PURE__*/function () {
  function OSelect(_ref) {
    var _this = this;

    var selector = _ref.selector,
        data = _ref.data,
        fxPopulate = _ref.fxPopulate,
        onInputSet = _ref.onInputSet,
        _ref$onSelected = _ref.onSelected,
        onSelected = _ref$onSelected === void 0 ? function () {} : _ref$onSelected,
        idActive = _ref.idActive,
        hasImage = _ref.hasImage,
        _ref$accessors = _ref.accessors,
        accessors = _ref$accessors === void 0 ? {
      id: "id",
      name: "name"
    } : _ref$accessors;

    _classCallCheck(this, OSelect);

    //order important
    this.accessors = accessors;
    this.hasImage = !!hasImage;
    this.selector = selector;
    this.$selector = $(selector);
    this.prepare();
    this.$img = this.$selector.find('i.o-select-img');
    this.$input = this.$selector.find('input.form-control');
    this.$placeholder = this.$selector.find('span.placeholder');
    this.$ul = this.$selector.find('ul');
    this.populate = fxPopulate;
    this.onInputSet = onInputSet;
    this.onSelected = onSelected;
    this.data = data;
    this.filtered = _toConsumableArray(data);
    this.setSelectedItem(idActive);
    this.updateList(data);
    this.setInput();
    this.setInputListeners();
    this.setItemsListeners();
    this.cursor = -1;
    this.inputActive = false;
    $("body").on("click", function () {
      _this.inputActive = false;
    });
  }

  _createClass(OSelect, [{
    key: "setData",
    value: function setData(data) {
      this.data = data;
      this.filtered = _toConsumableArray(data);
    }
  }, {
    key: "updateList",
    value: function updateList(data) {
      var _this2 = this;

      var html = [];
      html = data.map(function (item) {
        return _this2.populate(item);
      });
      this.$ul.html(html.join('')); // this.setItemsListeners();
    }
  }, {
    key: "setItemsListeners",
    value: function setItemsListeners() {
      var self = this;
      $(document).on("click", "".concat(this.selector, " ul li"), function () {
        console.log("click");
        if ($(this).hasClass('divider')) return;
        var id = $(this).data('id');
        console.log(id);
        self.setSelectedItem(id);
        self.setInput();
        self.onSelected(id);
      });
    }
  }, {
    key: "setSelectedItem",
    value: function setSelectedItem(idActive) {
      var _this3 = this;

      this.selectedItem = this.data.filter(function (item) {
        return item[_this3.accessors.id] == idActive;
      })[0];
      return this;
    }
  }, {
    key: "setCursor",
    value: function setCursor(key) {
      if (key == keys.ARROW_DOWN) {
        this.cursor = this.cursor != this.filtered.length ? this.cursor + 1 : this.cursor;
      } else {
        this.cursor = this.cursor != -1 ? this.cursor - 1 : this.cursor;
      }

      this.setSelectedClass();
    }
  }, {
    key: "setSelectedClass",
    value: function setSelectedClass() {
      var _this4 = this;

      var lis = this.$ul.find('li');
      $(lis).removeClass('selected');

      if (this.cursor != -1) {
        var self = this;
        $(lis[self.cursor]).addClass('selected');
        var id = $(lis[self.cursor]).data('id') || this.filtered[0][this.accessors.id];
        var item = this.data.filter(function (item) {
          return item[_this4.accessors.id] == id;
        })[0];
        self.$placeholder.text(item[this.accessors.name]);
        self.setInput(item, true);
      }
    }
  }, {
    key: "setInputListeners",
    value: function setInputListeners() {
      var _this5 = this;

      this.$input.click(function (e) {
        if (!_this5.inputActive) {
          _this5.inputActive = true;

          _this5.$input.val('');

          _this5.$placeholder.text(_this5.selectedItem[_this5.accessors.name]);

          _this5.$ul.slideDown(200);
        }

        e.stopPropagation();
      }); // this.$input.blur(e => {
      //     this.$placeholder.text('');
      //     setTimeout(() => {
      //         this.setInput();
      //         this.$ul.slideUp(100);
      //         this.updateList(this.data);
      //         e.stopPropagation();    
      //     }, 100);
      // });
      // this.$input.keyup(e => {
      //     let value = e.target.value;
      //     if(e.which == keys.ESC){
      //         this.cursor = -1;
      //         this.$input.blur();
      //     }
      //     if(e.which == keys.ENTER){
      //         this.cursor = -1;
      //         let li = this.$ul.find('li.selected');
      //         if(li){
      //             let id = $(li).data('id') || this.filtered[0][this.accessors.id];
      //             this.setSelectedItem(id);
      //             this.$input.blur();
      //             setTimeout(() => {
      //                 this.updateList(this.data);
      //                 this.onSelected(id);
      //             }, 300);
      //         }
      //     }
      //     else if(e.which == keys.ARROW_UP || e.which == keys.ARROW_DOWN){
      //         this.setCursor(e.which);
      //         this.$input.val(value);
      //     }else{
      //         if(value.trim() != ''){
      //             this.cursor = 0;
      //             let filtered = this.data.filter(c => c[this.accessors.name] && c[this.accessors.name].toLowerCase().startsWith(value.toLowerCase()));
      //             this.filtered = filtered.length > 0 ? filtered : this.filtered;
      //             this.updateList([...filtered]);
      //             this.setSelectedClass(this.filtered[0]);
      //             let temp = this.filtered.length > 0 ? this.filtered[0] : this.selectedItem;
      //             this.$placeholder.text(temp[this.accessors.name]);
      //             this.$input.val(temp[this.accessors.name].substring(0, value.length));
      //             this.setInput(temp, true);
      //         }
      //         else{
      //             this.cursor = -1;
      //             this.updateList(this.data);
      //             this.$placeholder.text(this.selectedItem[this.accessors.name]);
      //             this.setInput(this.selectedItem, true);
      //         }
      //     }
      // });
    }
  }, {
    key: "setInput",
    value: function setInput() {
      var item = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.selectedItem;
      var dontSetVal = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;

      if (!dontSetVal) {
        this.$input.val(item[this.accessors.name]);
      }

      if (this.onInputSet) {
        this.onInputSet(this.$img, item[this.accessors.id]);
      }
    }
  }, {
    key: "prepare",
    value: function prepare() {
      var html = this.hasImage ? '<i class="o-select-img"></i>' : '';
      html += "<input type=\"text\" class=\"form-control\">\n            <span class='placeholder'></span>\n            <ul></ul>";
      this.$selector.html(html);
    }
  }]);

  return OSelect;
}();

exports["default"] = OSelect;

},{}],2:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

var DefaultSelector = /*#__PURE__*/function () {
  function DefaultSelector($selector, fxOnParamSelected, defaultLabel, paramName, keyName) {
    var displayName = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : "displayName";

    _classCallCheck(this, DefaultSelector);

    this.$selector = $selector;
    this.defaultLabel = defaultLabel;
    this.paramName = paramName;
    this.keyName = keyName;
    this.displayName = displayName;
    this.add();
    this.addHandler(fxOnParamSelected);
  }

  _createClass(DefaultSelector, [{
    key: "add",
    value: function add() {
      this.$selector.html(this.getDefaultOption(this.defaultLabel, "-1"));
    }
  }, {
    key: "render",
    value: function render(items, selectedValue) {
      var _this = this;

      var html = items ? items.map(function (item) {
        var count = item.displayCount ? "(".concat(item.displayCount, ")") : '';
        return "<option value='".concat(item[_this.keyName], "' \n                ").concat(item[_this.keyName] == selectedValue ? 'selected' : '', ">\n                    ").concat(item[_this.displayName], " ").concat(count, "\n                </option>");
      }) : "";
      this.$selector.html([this.getDefaultOption(this.defaultLabel, "-1")].concat(_toConsumableArray(html)).join(''));
    }
  }, {
    key: "getDefaultOption",
    value: function getDefaultOption(name, value) {
      return "<option value=\"".concat(value, "\">").concat(name, "</option>");
    }
  }, {
    key: "addHandler",
    value: function addHandler(fxHandler) {
      var _this2 = this;

      this.$selector.change(function (e) {
        fxHandler(_this2.paramName, e.target.value);
      });
    }
  }]);

  return DefaultSelector;
}();

exports["default"] = DefaultSelector;

},{}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _oSelect = _interopRequireDefault(require("../o-select"));

var _defaultSelector = _interopRequireDefault(require("./default-selector"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

var QS = /*#__PURE__*/function () {
  function QS() {
    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
        _ref$page = _ref.page,
        page = _ref$page === void 0 ? "index" : _ref$page,
        _ref$orientation = _ref.orientation,
        orientation = _ref$orientation === void 0 ? "vertical" : _ref$orientation;

    _classCallCheck(this, QS);

    this.paramMap = this.getInitialParamMap();
    this.layoutManager = new LayoutManager({
      page: page,
      fxOnParamSelected: this.onParamSelected.bind(this),
      fxOnZip: this.onZip.bind(this),
      fxOnReset: this.onReset.bind(this),
      paramMap: this.paramMap,
      orientation: orientation,
      qs: this
    });
    this.countries = [];
    this.cached = {};
    this.idTimeout = 0;
  }

  _createClass(QS, [{
    key: "endpoint",
    value: function endpoint(paramMap) {
      var source = paramMap.idMake && paramMap.idMake != -1 ? paramMap.idMake : "default";
      return "/qsbgtst/data/".concat(source, ".json"); // return '/ooyyo-services/resources/quicksearch/qselements?json=' + encodeURIComponent(JSON.stringify(paramMap));
    }
  }, {
    key: "get",
    value: function get(paramMap) {
      var _this = this;

      var endpoint = this.endpoint(paramMap);
      return fetch(endpoint).then(function (response) {
        return response.json();
      }).then(function (data) {
        _this.cached = data;

        var ret = _objectSpread({}, data);

        return new Promise(function (resolve, reject) {
          resolve(ret);
        });
      });
    }
  }, {
    key: "getData",
    value: function getData() {
      return this.get(this.paramMap);
    }
  }, {
    key: "getRequiredParamMap",
    value: function getRequiredParamMap() {
      var ret = {
        idDomain: OYO.appParams.idDomain,
        idCountry: OYO.appParams.idCountry,
        idLanguage: OYO.appParams.idLanguage,
        idCurrency: OYO.appParams.idCurrency,
        isNew: OYO.appParams.isNew,
        qsType: 'advanced'
      };
      return ret;
    }
  }, {
    key: "getInitialParamMap",
    value: function getInitialParamMap() {
      var ret = this.getRequiredParamMap();

      if (OYO.appParams.idMake !== '') {
        ret.idMake = OYO.appParams.idMake;

        if (OYO.appParams.idModel !== '') {
          ret.idModel = OYO.appParams.idModel;

          if (OYO.appParams.idTrim !== '') {
            ret.idTrim = OYO.appParams.idTrim;
          }
        }
      }

      var otherParams = ['priceFrom', 'priceTo', 'yearFrom', 'yearTo', 'mileageFrom', 'mileageTo', 'idBodytype', 'idFueltype', 'zipCode', 'radius', 'idState', 'idCity', 'idTransmission', 'idColor', 'power'];
      otherParams.forEach(function (paramName) {
        if (OYO.appParams[paramName] !== '') ret[paramName] = OYO.appParams[paramName];
      });
      return ret;
    }
  }, {
    key: "onParamSelected",
    value: function onParamSelected(name, value, removeIfExists) {
      var _this2 = this;

      if (removeIfExists && this.paramMap[name] == value) {
        delete this.paramMap[name];
      } else {
        if (name == 'idMake') {
          delete this.paramMap['idModel'];
          delete this.paramMap['idTrim'];
        }

        if (name == 'idModel') {
          delete this.paramMap['idTrim'];
        }

        if (value == '-1' || value == '200000') {
          delete this.paramMap[name];
        } else {
          this.paramMap[name] = value;
        }
      }

      this.getData().then(function (data) {
        _this2.layoutManager.render(data);
      });
    }
  }, {
    key: "onZip",
    value: function onZip(_ref2) {
      var _this3 = this;

      var zipCode = _ref2.zipCode,
          radius = _ref2.radius;
      var sendRequest = false;

      if (zipCode) {
        if (zipCode != this.paramMap["zipCode"]) {
          this.paramMap["zipCode"] = zipCode;

          if (!this.paramMap['radius']) {
            this.paramMap["radius"] = "30";
          }

          sendRequest = true;
        }
      } else {
        if (radius) {
          this.paramMap["radius"] = radius;

          if (this.paramMap['zipCode']) {
            sendRequest = true;
          }
        } else {
          delete this.paramMap['zipCode'];
          delete this.paramMap['radius'];
          sendRequest = true;
        }
      }

      if (sendRequest) {
        this.getData().then(function (data) {
          _this3.layoutManager.render(data);
        });
        return true;
      } else return false;
    }
  }, {
    key: "onReset",
    value: function onReset() {
      var _this4 = this;

      this.paramMap = this.getRequiredParamMap();
      this.layoutManager.paramMap = this.paramMap;
      this.getData().then(function (data) {
        _this4.layoutManager.render(data);
      });
    }
  }, {
    key: "deleteParams",
    value: function deleteParams() {
      delete this.paramMap.idMake;
      delete this.paramMap.idModel;
      delete this.paramMap.idTrim;
      delete this.paramMap.priceFrom;
      delete this.paramMap.priceTo;
      delete this.paramMap.yearFrom;
      delete this.paramMap.yearTo;
      delete this.paramMap.mileageFrom;
      delete this.paramMap.mileageTo;
      delete this.paramMap.idBodytype;
      delete this.paramMap.idFueltype;
      delete this.paramMap.zipCode;
      delete this.paramMap.radius;
      delete this.paramMap.idState;
      delete this.paramMap.idCity;
      delete this.paramMap.idTransmission;
      delete this.paramMap.idColor;
      delete this.paramMap.power;
    }
  }, {
    key: "init",
    value: function init() {
      var _this5 = this;

      var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
          fixedSearchButton = _ref3.fixedSearchButton;

      this.getData().then(function (data) {
        _this5.layoutManager.render(data);
      });
      $(document).on("qs-search", function (e, paramMap) {
        var fxOnResponse = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {};

        _this5.get(paramMap).then(function (data) {
          fxOnResponse(data);
        });
      });
      $(document).on("qs-search-param-map", function (e) {
        var fxOnParamMap = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};
        fxOnParamMap(_this5.paramMap);
      });
      $(document).on("qs-search-initial-param-map", function (e) {
        var fxOnParamMap = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};
        fxOnParamMap(_this5.getInitialParamMap());
      });
    }
  }]);

  return QS;
}();

exports["default"] = QS;

var LayoutManager = /*#__PURE__*/function () {
  function LayoutManager(_ref4) {
    var page = _ref4.page,
        fxOnParamSelected = _ref4.fxOnParamSelected,
        fxOnZip = _ref4.fxOnZip,
        fxOnReset = _ref4.fxOnReset,
        paramMap = _ref4.paramMap,
        orientation = _ref4.orientation,
        qs = _ref4.qs;

    _classCallCheck(this, LayoutManager);

    this.page = page;
    this.orientation = orientation;
    this.paramMap = paramMap;
    this.fxOnParamSelected = fxOnParamSelected;
    this.fxOnZip = fxOnZip;
    this.fxOnReset = fxOnReset;
    this.enabled = false;
    this.loading = true;
    this.makeSelector = this.getMakeSelector();
    this.modelSelector = new _defaultSelector["default"]($("._js-qs-model"), this.onParamSelected.bind(this), OYO.labels.model, "idModel", "idModel", "name");
    this.trimSelector = new _defaultSelector["default"]($("._js-qs-trim"), this.onParamSelected.bind(this), OYO.labels.trim, "idTrim", "idTrim", "name");
  }

  _createClass(LayoutManager, [{
    key: "onParamSelected",
    value: function onParamSelected(name, value, removeIfExists) {
      this.lock();
      this.fxOnParamSelected(name, value, removeIfExists);
    }
  }, {
    key: "onZip",
    value: function onZip(_ref5) {
      var zipCode = _ref5.zipCode,
          radius = _ref5.radius;
      var shouldLock = this.fxOnZip({
        zipCode: zipCode,
        radius: radius
      });
      if (shouldLock) this.lock();
    }
  }, {
    key: "lock",
    value: function lock() {
      this.loading = true;
      this.renderLock();
    }
  }, {
    key: "unlock",
    value: function unlock() {
      this.loading = false;
      this.renderLock();
    }
  }, {
    key: "renderLock",
    value: function renderLock() {
      if (this.loading) {
        $("._js-qs-lock").show();
      } else {
        $("._js-qs-lock").hide();
      }
    }
  }, {
    key: "render",
    value: function render(data) {
      if (data.status == 1) {
        this.renderMakeSelector(data.makes);
        this.updateModelTrimSelectorsState();
        this.modelSelector.render(data.models.black, this.paramMap.idModel);
        this.trimSelector.render(data.trims.black, this.paramMap.idTrim);
      }

      this.unlock();
    }
  }, {
    key: "getMakeSelector",
    value: function getMakeSelector() {
      var _this6 = this;

      return new _oSelect["default"]({
        selector: "._js-qs-make",
        data: [{
          idMake: -1,
          name: OYO.labels.make
        }],
        fxPopulate: function fxPopulate(m) {
          if (m.divider) return "<li class='divider'></li>";
          var count = m.idMake == -1 ? '' : m.displayCount;
          return "<li data-id='".concat(m.idMake, "'>\n                            <i class=\"logo-make logo-make-").concat(m.idMake, " mr-12\"></i> \n                            <div>").concat(m.name, "</div>\n                            <span class=\"ml-auto pr-16\">").concat(count, "</span>\n                        </li>");
        },
        onInputSet: function onInputSet($img, id) {
          $img.attr('class', "o-select-img logo-make logo-make-".concat(id));
        },
        onSelected: function onSelected(id) {
          _this6.onParamSelected("idMake", String(id));
        },
        idActive: -1,
        hasImage: true,
        accessors: {
          id: "idMake",
          name: "name"
        }
      });
    }
  }, {
    key: "renderMakeSelector",
    value: function renderMakeSelector(input) {
      var topIds = input.top.map(function (make) {
        return make.idMake;
      });
      var allButTop = input.black.filter(function (make) {
        return !topIds.includes(make.idMake);
      });
      var makes = [{
        idMake: -1,
        name: OYO.labels.make
      }].concat(_toConsumableArray(input.top), [{
        divider: true
      }], _toConsumableArray(allButTop));
      var selectedMake = this.paramMap.idMake || -1;
      this.makeSelector.setData(makes);
      this.makeSelector.updateList(makes);
      this.makeSelector.setSelectedItem(selectedMake);
      this.makeSelector.setInput();
    }
  }, {
    key: "updateModelTrimSelectorsState",
    value: function updateModelTrimSelectorsState() {
      if (this.paramMap.idModel && this.paramMap.idModel > -1) {
        $("._js-qs-trim").removeAttr('disabled');

        if (OYO.utils.res.isMobile() || this.orientation == "vertical") {
          $("._js-qs-trim-wrapper").show();
        }
      } else {
        $("._js-qs-trim").attr('disabled', true);

        if (OYO.utils.res.isMobile() || this.orientation == "vertical") {
          $("._js-qs-trim-wrapper").hide();
        }
      }

      if (this.paramMap.idMake && this.paramMap.idMake > -1) {
        $("._js-qs-model").removeAttr('disabled');

        if (OYO.utils.res.isMobile() || this.orientation == "vertical") {
          $("._js-qs-model-wrapper").show();
        }
      } else {
        $("._js-qs-model").attr('disabled', true);

        if (OYO.utils.res.isMobile() || this.orientation == "vertical") {
          $("._js-qs-model-wrapper").hide();
        }
      }
    }
  }]);

  return LayoutManager;
}();

},{"../o-select":1,"./default-selector":2}],4:[function(require,module,exports){
"use strict";

var _quickSearch = _interopRequireDefault(require("./features/qs/quick-search"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

$(document).ready(function () {
  var qs = new _quickSearch["default"]({
    page: 'index',
    orientation: 'horizontal'
  });
  qs.init({
    fixedSearchButton: true
  });
  OYO.utils.showPageScrollbar();
});

},{"./features/qs/quick-search":3}]},{},[4]);

//# sourceMappingURL=index.min.js.map
